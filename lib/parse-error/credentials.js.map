{"version":3,"names":["ParseErrorCode","reflect","keys","last","length","get","reduce","object","key","set","value","item","i","instantiate","constructor","properties","descriptors","Object","map","filter","descriptor","enumerable","split","instance","defineProperty","configurable","assign"],"sources":["../../src/parse-error/credentials.ts"],"sourcesContent":["export const enum ParseErrorCode {\n  SyntaxError = \"BABEL_PARSER_SYNTAX_ERROR\",\n  SourceTypeModuleError = \"BABEL_PARSER_SOURCETYPE_MODULE_REQUIRED\",\n}\n\nexport type SyntaxPlugin =\n  | \"flow\"\n  | \"typescript\"\n  | \"jsx\"\n  | \"pipelineOperator\"\n  | \"placeholders\";\n\nexport type ToMessage<ErrorDetails> = (self: ErrorDetails) => string;\n\nexport type ParseErrorCredentials<ErrorDetails> = {\n  code: ParseErrorCode;\n  reasonCode: string;\n  syntaxPlugin?: SyntaxPlugin;\n  toMessage: ToMessage<ErrorDetails>;\n};\n\nconst reflect = (keys: string[], last = keys.length - 1) => ({\n  get(this: unknown): unknown {\n    return keys.reduce(\n      (object, key) =>\n        // @ts-expect-error key should index object\n        object[key],\n      this,\n    );\n  },\n  set(this: unknown, value: unknown) {\n    keys.reduce(\n      // @ts-expect-error key should index item\n      (item, key, i) => (i === last ? (item[key] = value) : item[key]),\n      this,\n    );\n  },\n});\n\nconst instantiate = <T>(\n  constructor: new () => T,\n  properties: any,\n  descriptors: any,\n) =>\n  Object.keys(descriptors)\n    .map(key => [key, descriptors[key]])\n    .filter(([, descriptor]) => !!descriptor)\n    .map(([key, descriptor]) => [\n      key,\n      typeof descriptor === \"function\"\n        ? { value: descriptor, enumerable: false }\n        : typeof descriptor.reflect === \"string\"\n        ? { ...descriptor, ...reflect(descriptor.reflect.split(\".\")) }\n        : descriptor,\n    ])\n    .reduce(\n      (instance, [key, descriptor]) =>\n        Object.defineProperty(instance, key, {\n          configurable: true,\n          ...descriptor,\n        }),\n      Object.assign(new constructor(), properties),\n    );\n\nexport { instantiate };\n"],"mappings":";;;;;;IAAkBA,c;;;;;;AAqBlB,MAAMC,OAAO,GAAG,CAACC,IAAD,EAAiBC,IAAI,GAAGD,IAAI,CAACE,MAAL,GAAc,CAAtC,MAA6C;EAC3DC,GAAG,GAAyB;IAC1B,OAAOH,IAAI,CAACI,MAAL,CACL,CAACC,MAAD,EAASC,GAAT,KAEED,MAAM,CAACC,GAAD,CAHH,EAIL,IAJK,CAAP;EAMD,CAR0D;;EAS3DC,GAAG,CAAgBC,KAAhB,EAAgC;IACjCR,IAAI,CAACI,MAAL,CAEE,CAACK,IAAD,EAAOH,GAAP,EAAYI,CAAZ,KAAmBA,CAAC,KAAKT,IAAN,GAAcQ,IAAI,CAACH,GAAD,CAAJ,GAAYE,KAA1B,GAAmCC,IAAI,CAACH,GAAD,CAF5D,EAGE,IAHF;EAKD;;AAf0D,CAA7C,CAAhB;;AAkBA,MAAMK,WAAW,GAAG,CAClBC,WADkB,EAElBC,UAFkB,EAGlBC,WAHkB,KAKlBC,MAAM,CAACf,IAAP,CAAYc,WAAZ,EACGE,GADH,CACOV,GAAG,IAAI,CAACA,GAAD,EAAMQ,WAAW,CAACR,GAAD,CAAjB,CADd,EAEGW,MAFH,CAEU,CAAC,GAAGC,UAAH,CAAD,KAAoB,CAAC,CAACA,UAFhC,EAGGF,GAHH,CAGO,CAAC,CAACV,GAAD,EAAMY,UAAN,CAAD,KAAuB,CAC1BZ,GAD0B,EAE1B,OAAOY,UAAP,KAAsB,UAAtB,GACI;EAAEV,KAAK,EAAEU,UAAT;EAAqBC,UAAU,EAAE;AAAjC,CADJ,GAEI,OAAOD,UAAU,CAACnB,OAAlB,KAA8B,QAA9B,qBACKmB,UADL,EACoBnB,OAAO,CAACmB,UAAU,CAACnB,OAAX,CAAmBqB,KAAnB,CAAyB,GAAzB,CAAD,CAD3B,IAEAF,UANsB,CAH9B,EAWGd,MAXH,CAYI,CAACiB,QAAD,EAAW,CAACf,GAAD,EAAMY,UAAN,CAAX,KACEH,MAAM,CAACO,cAAP,CAAsBD,QAAtB,EAAgCf,GAAhC;EACEiB,YAAY,EAAE;AADhB,GAEKL,UAFL,EAbN,EAiBIH,MAAM,CAACS,MAAP,CAAc,IAAIZ,WAAJ,EAAd,EAAiCC,UAAjC,CAjBJ,CALF"}